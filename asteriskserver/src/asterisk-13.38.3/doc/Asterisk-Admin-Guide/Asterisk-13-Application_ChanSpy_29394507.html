<!DOCTYPE html>
<html>
    <head>
        <title>Asterisk Project : Asterisk 13 Application_ChanSpy</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Asterisk Project</a></span>
                            </li>
                                                    <li>
                                <span><a href="Asterisk-13-Command-Reference_29394274.html">Asterisk 13 Command Reference</a></span>
                            </li>
                                                    <li>
                                <span><a href="Asterisk-13-Dialplan-Applications_29394285.html">Asterisk 13 Dialplan Applications</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Asterisk Project : Asterisk 13 Application_ChanSpy
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> wikibot</span> on Aug 08, 2014
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="Asterisk13Application_ChanSpy-ChanSpy()">ChanSpy()</h1>

<h3 id="Asterisk13Application_ChanSpy-Synopsis">Synopsis</h3>

<p>Listen to a channel, and optionally whisper into it.</p>

<h3 id="Asterisk13Application_ChanSpy-Description">Description</h3>

<p>This application is used to listen to the audio from an Asterisk channel. This includes the audio coming in and out of the channel being spied on. If the <code>chanprefix</code> parameter is specified, only channels beginning with this string will be spied upon.</p>

<p>While spying, the following actions may be performed:</p>

<ul class="alternate">
	<li>Dialing <code>#</code> cycles the volume level.</li>
</ul>


<ul class="alternate">
	<li>Dialing <code>*</code> will stop spying and look for another channel to spy on.</li>
</ul>


<ul class="alternate">
	<li>Dialing a series of digits followed by <code>#</code> builds a channel name to append to <code>chanprefix</code>. For example, executing ChanSpy(Agent) and then dialing the digits '1234#' while spying will begin spying on the channel 'Agent/1234'. Note that this feature will be overridden if the 'd' or 'u' options are used.</li>
</ul>


    <div class="aui-message hint shadowed information-macro">
                    <p class="title">Note</p>
                            <span class="aui-icon icon-hint">Icon</span>
                <div class="message-content">
                            
<p>The <em>X</em> option supersedes the three features above in that if a valid single digit extension exists in the correct context ChanSpy will exit to it. This also disables choosing a channel based on <code>chanprefix</code> and a digit sequence.</p>

                    </div>
    </div>


<h3 id="Asterisk13Application_ChanSpy-Syntax">Syntax</h3>


<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ChanSpy([chanprefix,[options]])</pre>
</div></div>

<h5 id="Asterisk13Application_ChanSpy-Arguments">Arguments</h5>

<ul>
	<li><code>chanprefix</code></li>
	<li><code>options</code>
	<ul>
		<li><code>b</code> - Only spy on channels involved in a bridged call.</li>
		<li><code>B</code> - Instead of whispering on a single channel barge in on both channels involved in the call.</li>
		<li><code>c</code>
		<ul>
			<li><code>digit</code> - Specify a DTMF digit that can be used to spy on the next available channel.</li>
		</ul>
		</li>
		<li><code>d</code> - Override the typical numeric DTMF functionality and instead use DTMF to switch between spy modes.
		<ul>
			<li><code>4</code> - spy mode</li>
			<li><code>5</code> - whisper mode</li>
			<li><code>6</code> - barge mode</li>
		</ul>
		</li>
		<li><code>e</code> - Enable <strong>enforced</strong> mode, so the spying channel can only monitor extensions whose name is in the <em>ext</em> : delimited list.
		<ul>
			<li><code>ext</code></li>
		</ul>
		</li>
		<li><code>E</code> - Exit when the spied-on channel hangs up.</li>
		<li><code>g</code>
		<ul>
			<li><code>grp</code> - Only spy on channels in which one or more of the groups listed in <em>grp</em> matches one or more groups from the <code>SPYGROUP</code> variable set on the channel to be spied upon.</li>
		</ul>
		</li>
		<li><code>n</code> - Say the name of the person being spied on if that person has recorded his/her name. If a context is specified, then that voicemail context will be searched when retrieving the name, otherwise the <code>default</code> context be used when searching for the name (i.e. if SIP/1000 is the channel being spied on and no mailbox is specified, then <code>1000</code> will be used when searching for the name).
		<ul>
			<li><code>mailbox</code></li>
			<li><code>context</code></li>
		</ul>
		</li>
		<li><code>o</code> - Only listen to audio coming from this channel.</li>
		<li><code>q</code> - Don't play a beep when beginning to spy on a channel, or speak the selected channel name.</li>
		<li><code>r</code> - Record the session to the monitor spool directory. An optional base for the filename may be specified. The default is <code>chanspy</code>.
		<ul>
			<li><code>basename</code></li>
		</ul>
		</li>
		<li><code>s</code> - Skip the playback of the channel type (i.e. SIP, IAX, etc) when speaking the selected channel name.</li>
		<li><code>S</code> - Stop when no more channels are left to spy on.</li>
		<li><code>u</code> - The <code>chanprefix</code> parameter is a channel uniqueid or fully specified channel name.</li>
		<li><code>v</code> - Adjust the initial volume in the range from <code>-4</code> to <code>4</code>. A negative value refers to a quieter setting.
		<ul>
			<li><code>value</code></li>
		</ul>
		</li>
		<li><code>w</code> - Enable <code>whisper</code> mode, so the spying channel can talk to the spied-on channel.</li>
		<li><code>W</code> - Enable <code>private whisper</code> mode, so the spying channel can talk to the spied-on channel but cannot listen to that channel.</li>
		<li><code>x</code>
		<ul>
			<li><code>digit</code> - Specify a DTMF digit that can be used to exit the application while actively spying on a channel. If there is no channel being spied on, the DTMF digit will be ignored.</li>
		</ul>
		</li>
		<li><code>X</code> - Allow the user to exit ChanSpy to a valid single digit numeric extension in the current context or the context specified by the <code>SPY_EXIT_CONTEXT</code> channel variable. The name of the last channel that was spied on will be stored in the <code>SPY_CHANNEL</code> variable.</li>
	</ul>
	</li>
</ul>


<h3 id="Asterisk13Application_ChanSpy-SeeAlso">See Also</h3>

<ul>
	<li><a href="Asterisk-13-Application_ExtenSpy_29394508.html">Asterisk 13 Application_ExtenSpy</a></li>
	<li><a href="Asterisk-13-ManagerEvent_ChanSpyStart_29394984.html">Asterisk 13 ManagerEvent_ChanSpyStart</a></li>
	<li><a href="Asterisk-13-ManagerEvent_ChanSpyStop_29395049.html">Asterisk 13 ManagerEvent_ChanSpyStop</a></li>
</ul>



<h3 id="Asterisk13Application_ChanSpy-ImportVersion">Import Version</h3>

<p>This documentation was imported from Asterisk Version SVN-branch-13-r420538</p>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer">
                <section class="footer-body">
                    <p>Document generated by Confluence on Aug 11, 2014 13:44</p>
                </section>
            </div>
        </div>     </body>
</html>
