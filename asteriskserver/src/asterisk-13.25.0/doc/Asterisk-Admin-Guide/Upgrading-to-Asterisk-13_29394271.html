<!DOCTYPE html>
<html>
    <head>
        <title>Asterisk Project : Upgrading to Asterisk 13</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Asterisk Project</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Asterisk Project : Upgrading to Asterisk 13
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created and last modified by <span class='author'> mjordan</span> on Aug 10, 2014
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="sectionColumnWrapper"><div class="sectionMacro"><div class="sectionMacroRow"><div class="columnMacro" style="width:80%;min-width:80%;max-width:80%;"><h1 id="UpgradingtoAsterisk13-Overview">Overview</h1><p>As Asterisk 13 is built on the architecture introduced in Asterisk 12, users upgrading to Asterisk 13 from an older version of Asterisk should be aware of the architectural changes that were made in the previous Standard release. It is recommended that you review:</p><ul><li>The upgrade notes on this page</li><li>The <a href="New-in-13_29394266.html">New in 13</a> information, which lists the major new features in Asterisk 13</li><li>The notes on <a href="https://wiki.asterisk.org/wiki/display/AST/Upgrading+to+Asterisk+12">Upgrading to Asterisk 12</a> <strong>if</strong> you are upgrading from a version of Asterisk prior to Asterisk 12<br />The notes on what is <a href="https://wiki.asterisk.org/wiki/display/AST/New+in+12">New in 12</a> <strong>if</strong> if you are upgrading from a version of Asterisk prior to Asterisk 12.</li></ul><h1 id="UpgradingtoAsterisk13-GeneralAsteriskUpdates">General Asterisk Updates</h1><ul><li>The asterisk command line <code>-I</code> option and the <em><code>asterisk.conf</code></em> <code>internal_timing</code> option have been removed. Internal timing is always enabled if any timing module is loaded.</li><li>The per console verbose level feature as previously implemented in Asterisk 11 caused a large performance penalty. The fix required some minor incompatibilities if the new <code>rasterisk</code> is used to connect to an earlier version. If the new <code>rasterisk</code> connects to an older Asterisk version then the root console verbose level is always affected by the <code>core set verbose</code> command of the remote console even though it may appear to only affect the current console. If an older version of <code>rasterisk</code> connects to the new version of Asterisk then the <code>core set verbose</code> command will have no effect.</li><li>The asterisk compatibility options in <em><code>asterisk.conf</code></em> have been removed. These options enabled certain backwards compatibility features for <code>pbx_realtime</code>, <code>res_agi</code>, and <code>app_set</code> that made their behaviour similar to Asterisk 1.4. Users who used these backwards compatibility settings should update their dialplans to use <code>','</code> instead of <code>'|'</code> as a delimiter, and should use the <a href="Asterisk-13-Application_Set_29394719.html">Set</a> dialplan application instead of the <a href="Asterisk-13-Application_MSet_29394720.html">MSet</a> dialplan application.</li></ul><h1 id="UpgradingtoAsterisk13-Applications">Applications</h1><h2 id="UpgradingtoAsterisk13-ConfBridge"><a href="Asterisk-13-Application_ConfBridge_29394402.html">ConfBridge</a></h2><ul><li>The <code><a href="Asterisk-13-Configuration_app_confbridge_29394510.html">sound_place_into_conference</a></code> sound used in <a href="Asterisk-13-Application_ConfBridge_29394402.html">ConfBridge</a> is now deprecated and is no longer functional. It has technically been broken since its inception and - to meet its documented use case - a different method is used to achieve the same goal. The new method is to use <code>sound_begin</code> to play a sound to the conference when <code>waitmarked</code> users are moved into the conference.</li></ul><h2 id="UpgradingtoAsterisk13-SetMusicOnHold"><a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+12+Application_SetMusicOnHold">SetMusicOnHold</a></h2><ul><li>The SetMusicOnHold dialplan application was deprecated and has been removed. Users of the application should use the <a href="Asterisk-13-Function_CHANNEL_29394648.html"><code>CHANNEL</code></a> function's <code>musicclass</code> setting instead.</li></ul><h2 id="UpgradingtoAsterisk13-WaitMusicOnHold"><a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+12+Application_WaitMusicOnHold">WaitMusicOnHold</a></h2><ul><li>The WaitMusicOnHold dialplan application was deprecated and has been removed. Users of the application should use <a href="Asterisk-13-Application_MusicOnHold_29394804.html">MusicOnHold</a> with a <code>duration</code> parameter instead.</li></ul></div><div class="columnMacro"><div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>On this Page</b></div><div class="panelContent">
<p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1407782351847 {padding: 0px;}
div.rbtoc1407782351847 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1407782351847 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1407782351847'>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-Overview'>Overview</a></li>
<li><a href='#UpgradingtoAsterisk13-GeneralAsteriskUpdates'>General Asterisk Updates</a></li>
<li><a href='#UpgradingtoAsterisk13-Applications'>Applications</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-ConfBridge'>ConfBridge</a></li>
<li><a href='#UpgradingtoAsterisk13-SetMusicOnHold'>SetMusicOnHold</a></li>
<li><a href='#UpgradingtoAsterisk13-WaitMusicOnHold'>WaitMusicOnHold</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-BuildSystem'>Build System</a></li>
<li><a href='#UpgradingtoAsterisk13-CDRBackends'>CDR Backends</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-cdr_sqlite'>cdr_sqlite</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-ChannelDrivers'>Channel Drivers</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-chan_dahdi'>chan_dahdi</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_gtalk'>chan_gtalk</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_h323'>chan_h323</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_jingle'>chan_jingle</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_pjsip'>chan_pjsip</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_sip'>chan_sip</a></li>
<li><a href='#UpgradingtoAsterisk13-chan_unistim'>chan_unistim</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-Core'>Core</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-ARI'>ARI</a></li>
<li><a href='#UpgradingtoAsterisk13-AMI'>AMI</a></li>
<li><a href='#UpgradingtoAsterisk13-CDR'>CDR</a></li>
<li><a href='#UpgradingtoAsterisk13-CLI'>CLI</a></li>
<li><a href='#UpgradingtoAsterisk13-HTTP'>HTTP</a></li>
<li><a href='#UpgradingtoAsterisk13-Logging'>Logging</a></li>
<li><a href='#UpgradingtoAsterisk13-RealTime'>RealTime</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-Resources'>Resources</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-res_http_websocket'>res_http_websocket</a></li>
<li><a href='#UpgradingtoAsterisk13-res_odbc'>res_odbc</a></li>
<li><a href='#UpgradingtoAsterisk13-res_jabber'>res_jabber</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-Scripts'>Scripts</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-safe_asterisk'>safe_asterisk</a></li>
</ul>
</li>
<li><a href='#UpgradingtoAsterisk13-Utilities'>Utilities</a>
<ul class='toc-indentation'>
<li><a href='#UpgradingtoAsterisk13-refcounter'>refcounter</a></li>
</ul>
</li>
</ul>
</div></p>
</div></div></div></div></div></div><h1 id="UpgradingtoAsterisk13-BuildSystem">Build System</h1><ul><li>Sample config files have been moved from <em><code>configs/</code></em> to a sub-folder of that directory, <em><code>samples</code></em>.</li><li>The <code>menuselect</code> utility has been pulled into the Asterisk repository. As a result, the <code>libxml2</code> development library is now a required dependency for Asterisk.</li><li><p>A new Compiler Flag, <code>REF_DEBUG</code>, has been added. When enabled, reference counted objects will emit additional debug information to the <em><code>refs</code></em> log file located in the standard Asterisk log file directory. This log file is useful in tracking down object leaks and other reference counting issues. Prior to this version, this option was only available by modifying the source code directly. This change also includes a new script, <em><code>refcounter.py</code></em>, in the <em><code>contrib</code></em> folder that will process the <em><code>refs</code></em> log file. Note that this replaces the <em><code>refcounter</code></em> utility that could be built from the <em><code>utils</code></em> directory.</p></li></ul><h1 id="UpgradingtoAsterisk13-CDRBackends">CDR Backends</h1><h2 id="UpgradingtoAsterisk13-cdr_sqlite">cdr_sqlite</h2><ul><li>The <code>cdr_sqlite</code> module was deprecated and has been removed. Users of this module should use the <code>cdr_sqlite3_custom</code> module instead.</li></ul><h1 id="UpgradingtoAsterisk13-ChannelDrivers">Channel Drivers</h1><h2 id="UpgradingtoAsterisk13-chan_dahdi">chan_dahdi</h2><ul><li>SS7 support now requires <code>libss7</code> v2.0 or later.</li><li>Added the <code>inband_on_setup_ack</code> compatibility option to <em><code>chan_dahdi.conf</code></em> to deal with switches that don't send an inband progress indication in the <code>SETUP ACKNOWLEDGE</code> message. Default is now <code>no</code>.</li></ul><h2 id="UpgradingtoAsterisk13-chan_gtalk">chan_gtalk</h2><ul><li>This module was deprecated and has been removed. Users of <code>chan_gtalk</code> should use <code>chan_motif</code>.</li></ul><h2 id="UpgradingtoAsterisk13-chan_h323">chan_h323</h2><ul><li>This module was deprecated and has been removed. Users of <code>chan_h323</code> should use <code>chan_ooh323</code>.</li></ul><h2 id="UpgradingtoAsterisk13-chan_jingle">chan_jingle</h2><ul><li>This module was deprecated and has been removed. Users of <code>chan_jingle</code> should use <code>chan_motif</code>.</li></ul><h2 id="UpgradingtoAsterisk13-chan_pjsip">chan_pjsip</h2><ul><li>Added a <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+13+Configuration_res_pjsip#Asterisk13Configuration_res_pjsip-endpoint_force_avp" rel="nofollow"><code>force_avp</code></a> option to <code>chan_pjsip</code> which will force the usage of <code>RTP/AVP</code>, <code>RTP/AVPF</code>, <code>RTP/SAVP</code>, or <code>RTP/SAVPF</code> as the media transport type in SDP offers depending on settings, even when DTLS is used for media encryption. This option can be set to improve interoperability with WebRTC clients that don't use the RFC defined transport for DTLS.</li><li>Added a <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+13+Configuration_res_pjsip#Asterisk13Configuration_res_pjsip-endpoint_media_use_received_transport" rel="nofollow"><code>media_use_received_transport</code></a> option to <code>chan_pjsip</code> which will cause the SDP answer to use the media transport as received in the SDP offer.</li></ul><h2 id="UpgradingtoAsterisk13-chan_sip">chan_sip</h2><ul><li>Made set <code>SIPREFERREDBYHDR</code> as inheritable for better <code>chan_pjsip</code> interoperability.</li><li>The <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+10+Function_SIPPEER"><code>SIPPEER</code></a> dialplan function no longer supports using a colon as a delimiter for parameters. The parameters for the function should be delimited using a comma.</li><li>The <code>SIPCHANINFO</code> dialplan function was deprecated and has been removed. Users of the function should use the <a href="Asterisk-13-Function_CHANNEL_29394648.html"><code>CHANNEL</code></a> function instead.</li><li>Added a <code>force_avp</code> option for <code>chan_sip</code>. When enabled this option will cause the media transport in the offer or answer SDP to be <code>RTP/AVP</code>, <code>RTP/AVPF</code>, <code>RTP/SAVP</code>, or <code>RTP/SAVPF</code> even if a DTLS stream has been configured. This option can be set to improve interoperability with WebRTC clients that don't use the RFC defined transport for DTLS.</li><li>The <code>dtlsverify</code> option in <code>chan_sip</code> now has additional values besides <code>yes</code> and <code>no</code>. If <code>yes</code> is specified both the certificate and fingerprint will be verified. If <code>no</code> is specified then neither the certificate or fingerprint is verified. If <code>certificate</code> is specified then only the certificate is verified. If <code>fingerprint</code> is specified then only the fingerprint is verified.</li><li>A <code>dtlsfingerprint</code> option has been added to <code>chan_sip</code> which allows the hash to be specified for the DTLS fingerprint placed in SDP. Supported values are <code>sha-1</code> and <code>sha-256</code> with <code>sha-256</code> being the default.</li><li>The <code>progressinband=never</code> option is now more zealous in the persecution of progress messages coming from Asterisk. Channels bridged with a SIP channel that has <code>progressinband=never</code> set will not be able to forward their progress indications through to the SIP device. <code>chan_sip</code> will now turn such progress indications into a 180 Ringing (if a 180 has not yet been transmitted) if <code>progressinband=never</code>.</li><li>The codec preference order in an SDP during an offer is slightly different than previous releases. Prior to Asterisk 13, the preference order of codecs used to be:</li></ul><ol><li style="list-style-type: none;background-image: none;"><ol><li>Our preferred codec</li><li>Our configured codecs</li><li>Any non-audio joint codecs</li></ol></li></ol>    <div class="aui-message warning shadowed information-macro">
                    <p class="title">Internal Implementation Details Ahead</p>
                            <span class="aui-icon icon-warning">Icon</span>
                <div class="message-content">
                            <p>One of the ways the new media format architecture in Asterisk 13 improves performance is by reference counting formats, such that they can be reused in many places without additional allocation. To not require a large amount of locking, an instance of a format is immutable by convention. This works well except for formats with attributes. Since a media format with an attribute is a different object than the same format without an attribute, we have to carry over the formats with attributes from an inbound offer so that the correct attributes are offered in an outgoing INVITE request. This requires some subtle tweaks to the preference order to ensure that the media format with attributes is offered to a remote peer, as opposed to the same media format (but without attributes) that may be stored in the peer object. </p>
                    </div>
    </div>
<p style="margin-left: 60.0px;">Now, in Asterisk 13, the preference order of codecs is:</p><ol><li style="list-style-type: none;background-image: none;"><ol><li>Our preferred codec</li><li>Any joint codecs offered by the inbound offer</li><li>All other codecs that are not the preferred codec and not a joint codec offered by the inbound offer</li></ol></li></ol><ul><li>chan_sip is now an <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+Module+Support+States">extended support module</a>.</li></ul><h2 id="UpgradingtoAsterisk13-chan_unistim">chan_unistim</h2><ul><li>The <em><code>unistim.conf</code></em> <code>dateformat</code> has changed the meaning of options values to conform to the values used inside Unistim protocol.</li><li>Added <code>dtmf_duration</code> option with changing default operation to disable received DTMF playback on a Unistim phone.</li></ul><h1 id="UpgradingtoAsterisk13-Core">Core</h1><ul><li>The behaviour of <code>accountcode</code> has changed somewhat to support <code>peeraccount</code>. The main change is that <a href="https://wiki.asterisk.org/wiki/display/AST/Local+Channel">Local channels</a> now cross <code>accountcode</code> and <code>peeraccount</code> settings across the special bridge between the <code>;1</code> and <code>;2</code> channels just like channels between normal bridges.  See <a href="New-in-13_29394266.html">New in 13</a> for more information.</li></ul><h2 id="UpgradingtoAsterisk13-ARI">ARI</h2><ul><li>The ARI version has been changed to 1.5.0. This is to reflect the backwards compatible changes listed in <a href="New-in-13_29394266.html">New in 13</a>.</li><li>A bug fix in bridge creation has caused a behavioural change in how subscriptions are created for bridges. A bridge created through ARI, does not, by itself, have a subscription created for any particular Stasis application. When a channel in a Stasis application joins a bridge, an implicit event subscription is created for that bridge as well. Previously, when a channel left such a bridge, the subscription was leaked; this allowed for later bridge events to continue to be pushed to the subscribed applications. That leak has been fixed; as a result, bridge events that were delivered after a channel left the bridge are no longer delivered. An application must subscribe to a bridge through the applications resource if it wishes to receive all events related to a bridge.</li></ul><h2 id="UpgradingtoAsterisk13-AMI">AMI</h2><ul><li>The AMI version has been changed to 2.5.0. This is to reflect the backwards compatible changes listed in <a href="New-in-13_29394266.html">New in 13</a>.</li><li><a href="Asterisk-13-ManagerAction_MixMonitor_29394452.html">MixMonitor</a> AMI actions now require users to have authorization classes:<br /><ul><li><a href="Asterisk-13-ManagerAction_MixMonitor_29394452.html">MixMonitor</a> - <code>system</code></li><li><a href="Asterisk-13-ManagerAction_MixMonitorMute_29394451.html">MixMonitorMute</a> - <code>call</code> or <code>system</code></li><li><a href="Asterisk-13-ManagerAction_StopMixMonitor_29394453.html">StopMixMonitor</a> - <code>call</code> or <code>system</code></li></ul></li><li>The undocumented <em><code>manager.conf</code></em> setting <code>block-sockets</code> has been removed. It interferes with TCP/TLS inactivity timeouts.</li><li>The response to the <a href="Asterisk-13-ManagerAction_PresenceState_29394753.html">PresenceState</a> AMI action has historically contained two <em>Message</em> keys. The first of these is used as an informative message regarding the success/failure of the action; the second contains a Presence state specific message. Having two keys with the same unique name in an AMI message is cumbersome for some client; hence, the Presence specific <em>Message</em> has been deprecated. The message will now contain a <em>PresenceMessage</em> key for the presence specific information; the <em>Message</em> key containing presence information will be removed in the next major version of AMI.</li><li><p>The <em><code>manager.conf</code></em> setting <code>eventfilter</code> now takes an &quot;extended&quot; regular expression instead of a &quot;basic&quot; one.</p></li></ul><h2 id="UpgradingtoAsterisk13-CDR">CDR</h2><ul><li>The <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+13+Configuration_cdr#Asterisk13Configuration_cdr-general_endbeforehexten" rel="nofollow"><code>endbeforehexten</code></a> setting now defaults to <code>yes</code>, instead of <code>no</code>. When set to <code>no</code>, this setting will cause a new CDR to be generated when a channel enters into hangup logic (either the <code>'h'</code> extension or a hangup handler subroutine). In general, this is not the preferred default: this causes extra CDRs to be generated for a channel in many common dialplans.</li></ul><h2 id="UpgradingtoAsterisk13-CLI">CLI</h2><ul><li><code>core show settings</code> now lists the current console verbosity in addition to the root console verbosity.</li><li><code>core set verbose</code> has not been able to support the by module verbose logging levels since verbose logging levels were made per console. That syntax is now removed and a silence option added in its place.</li></ul><h2 id="UpgradingtoAsterisk13-HTTP">HTTP</h2><ul><li>Added <em><code>http.conf</code></em> <code>session_inactivity</code> timer option to close HTTP connections that aren't doing anything.</li><li>Added support for persistent HTTP connections. To enable persistent HTTP connections configure the keep alive time between HTTP requests. The keep alive time between HTTP requests is configured in <em><code>http.conf</code></em> with the <code>session_keep_alive</code> parameter.</li></ul><h2 id="UpgradingtoAsterisk13-Logging">Logging</h2><ul><li>The <code>verbose</code> setting in <em>logger.conf</em> still takes an optional argument, specifying the verbosity level for each logging destination. However, the default is now to once again follow the current root console level. As a result, using the AMI Command action with <code>core set verbose</code> could again set the root console verbose level and affect the verbose level logged.</li></ul><h2 id="UpgradingtoAsterisk13-RealTime">RealTime</h2>    <div class="aui-message problem shadowed information-macro">
                    <p class="title">Whoops</p>
                            <span class="aui-icon icon-problem">Icon</span>
                <div class="message-content">
                            <p>The database migration script that adds the <code>extensions</code> table had to be modified due to an error when installing for MySQL. The <code>extensions</code> table's <code>id</code> column was changed to be a primary key. This could potentially cause a migration problem. If so, it may be necessary to manually alter the affected table/column to bring it back in line with the migration scripts.</p>
                    </div>
    </div>
<ul><li>A number of <a href="http://alembic.readthedocs.org/en/latest/" class="external-link" rel="nofollow">Alembic</a> scripts have been updated between Asterisk 12 and Asterisk 13. These include the following:<ul><li>For the <code>config</code> RealTime schemas:<br /><ul><li><p><code>1758e8bbf6b_increase_useragent_column_size.py</code> - increase the size of the <code>useragent</code> column in <code>sippeers</code> from <code>20</code> characters to <code>255</code> characters.</p></li><li><p><code>1d50859ed02e_create_accountcode.py</code> - add the <code>accountcode</code> column to the <code>ps_endpoints</code> table.</p></li><li><p><code>21e526ad3040_add_pjsip_debug_option.py</code> - add the <code>debug</code> column to the <code>ps_globals</code> table.</p></li><li><p><code>28887f25a46f_create_queue_tables.py</code> - creates the various <a href="Asterisk-13-Application_Queue_29394417.html">Queue</a> related tables.</p></li><li><p><code>2fc7930b41b3_add_pjsip_endpoint_options_for_12_1.py</code> - adds the <code>ps_system</code>s, <code>ps_globals</code>, <code>ps_transports</code>, and <code>ps_registrations</code> tables. Adds several new columns for <code>ps_endpoints</code>, <code>ps_contacts</code>, and <code>ps_aors</code>.</p></li><li><p><code>3855ee4e5f85_add_missing_pjsip_options.py</code> - adds the <code>message_context</code> column for the <code>ps_endpoints</code> table and the <code>user_agent</code> column for the <code>ps_contacts</code> table.</p></li><li><p><code>4c573e7135bd_fix_tos_field_types.py</code> - changes the type of the <code>ps_endpoints.tos_audio</code>, <code>ps_endpoints.tos_video</code>, and <code>ps_transports.tos</code> columns.</p></li><li><p><code>5139253c0423_make_q_member_uniqueid_autoinc.py</code> - modifies the <code>uniqueid</code> column on the <code>queue_members</code> table to be a unique auto-incrementing index, if the database supports it.</p></li><li><p><code>51f8cb66540e_add_further_dtls_options.py</code> - adds the <code>force_avp</code> and <code>media_use_received_transport</code> columns to the <code>ps_endpoints</code> table.</p></li><li><p><code>c6d929b23a8_create_pjsip_subscription_persistence_.py</code> - adds the <code>ps_subscription_persistence</code> table.</p></li><li><p><code>e96a0b8071c_increase_pjsip_column_size.py</code> - increases the size of the columns <code>ps_globals.user_agent</code>, <code>ps_contacts.id</code>, <code>ps_contacts.uri</code>, <code>ps_contacts.user_agent</code>, <code>ps_registrations.client_uri</code>, and <code>ps_registrations.server_uri</code>.</p></li></ul></li><li><p>For the <code>voicemail</code> ODBC backend schemas:</p><ul><li><p>39428242f7f5_increase_recording_column_size.py - changed the type of the <code>voicemail_messages.recording</code> column to <code>LargeBinary</code>, with a max size of <code>4294967295</code>.</p></li></ul></li><li><p>Added a new family of schemas for CDR backends, <code>cdr</code>.</p></li></ul></li></ul><h1 id="UpgradingtoAsterisk13-Resources">Resources</h1><h2 id="UpgradingtoAsterisk13-res_http_websocket">res_http_websocket</h2><ul><li>Added a compatibility option to <em><code>ari.conf</code></em>, <em><code>sip.conf</code></em>, and <em><code>pjsip.conf</code></em> - <code>websocket_write_timeout</code>. When a websocket connection exists where Asterisk writes a substantial amount of data to the connected client, and the connected client is slow to process the received data, the socket may be disconnected. In such cases, it may be necessary to adjust this value. Default is 100 ms.</li></ul><h2 id="UpgradingtoAsterisk13-res_odbc">res_odbc</h2><ul><li>The compatibility setting, <code>allow_empty_string_in_nontext</code>, has been removed. Empty column values will be stored as empty strings during RealTime updates.</li></ul><h2 id="UpgradingtoAsterisk13-res_jabber">res_jabber</h2><ul><li>This module was deprecated and has been removed. Users of this module should use <a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+13+Configuration_res_xmpp" rel="nofollow"><code>res_xmpp</code></a> instead.</li></ul><h1 id="UpgradingtoAsterisk13-Scripts">Scripts</h1><h2 id="UpgradingtoAsterisk13-safe_asterisk">safe_asterisk</h2><ul><li>The <em><code>safe_asterisk</code></em> script was previously not installed on top of an existing version. This caused bug-fixes in that script not to be deployed. If your <em><code>safe_asterisk</code></em> script is customized, be sure to keep your changes. Custom values for variables should be created in <code>*.sh</code> file(s) inside <em><code>ASTETCDIR/startup.d/</code></em>. For more information, see the original bug report that necessitated this change, <a href="https://issues.asterisk.org/jira/browse/ASTERISK-21965" class="external-link" rel="nofollow">ASTERISK-21965</a>.</li><li>Changed a log message in <em><code>safe_asterisk</code></em> and the <code>$NOTIFY</code> mail subject. If you use tools to parse either of them, update your parse functions accordingly. The changed strings are:<ul><li><code>&quot;Exited on signal $EXITSIGNAL&quot;</code> =&gt; <code>&quot;Asterisk exited on signal $EXITSIGNAL.&quot;</code></li><li><code>&quot;Asterisk Died&quot;</code> =&gt; <code>&quot;Asterisk on $MACHINE died (sig $EXITSIGNAL)&quot;</code></li></ul></li></ul><h1 id="UpgradingtoAsterisk13-Utilities">Utilities</h1><h2 id="UpgradingtoAsterisk13-refcounter">refcounter</h2><ul><li>The <em><code>refcounter</code></em> program has been removed in favour of the <em><code>refcounter.py</code></em> script in <em><code>contrib/scripts</code></em>.</li></ul><p> </p>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer">
                <section class="footer-body">
                    <p>Document generated by Confluence on Aug 11, 2014 13:39</p>
                </section>
            </div>
        </div>     </body>
</html>
